<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>시험실 모바일 계산기</title>
    <style>
        :root {
            --primary-color: #3498db;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --border-color: #dee2e6;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: var(--bg-color); 
            margin: 0; padding: 10px; color: var(--text-main);
            display: flex; justify-content: center;
        }

        .container { 
            background: var(--card-bg); 
            width: 100%; max-width: 500px; 
            border-radius: 16px; box-shadow: 0 8px 24px rgba(0,0,0,0.08); 
            overflow: hidden; padding-bottom: 20px;
        }

        .tabs { display: flex; background: #eee; padding: 5px; gap: 5px; }
        .tab-button { 
            flex: 1; padding: 15px 5px; border: none; background: none; 
            font-size: 14px; font-weight: bold; color: #777; cursor: pointer;
            transition: 0.3s; border-radius: 10px;
        }
        .tab-button.active { background: white; color: var(--primary-color); box-shadow: 0 2px 6px rgba(0,0,0,0.1); }

        .content-body { padding: 20px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-size: 1.25rem; margin-bottom: 15px; text-align: center; color: var(--primary-color); }

        .formula-box { 
            background: #f1f3f5; padding: 12px; border-radius: 8px; 
            font-size: 0.85rem; margin-bottom: 20px; text-align: center; border-left: 4px solid var(--primary-color);
        }

        .form-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-size: 13px; font-weight: 600; margin-bottom: 6px; color: #555; }
        
        /* 전체 필드 음수 입력 가능하도록 inputmode를 text로 통일 */
        input { 
            width: 100%; height: 48px; padding: 0 12px; border: 1px solid var(--border-color); 
            border-radius: 8px; font-size: 16px; transition: border-color 0.2s;
        }
        input:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2); }

        .calc-btn { 
            width: 100%; height: 56px; background: var(--primary-color); color: white; border: none; 
            border-radius: 12px; font-size: 18px; font-weight: bold; margin-top: 20px; cursor: pointer;
        }

        .result-card { 
            margin-top: 25px; padding: 20px; border-radius: 12px; 
            background: #eef7fe; border: 1px dashed var(--primary-color); display: none; text-align: center;
        }
        .result-value { font-size: 32px; font-weight: 800; color: #e74c3c; }

        @media (min-width: 400px) {
            .form-grid { grid-template-columns: 1fr 1fr; }
            .full-row { grid-column: span 2; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'tab1')">비표면적</button>
        <button class="tab-button" onclick="openTab(event, 'tab2')">공기량</button>
        <button class="tab-button" onclick="openTab(event, 'tab3')">무수황산</button>
    </div>

    <div class="content-body">
        <div id="tab1" class="tab-content active">
            <h2>비표면적(S) 계산</h2>
            <div class="formula-box">S = S₀·(ρ₀/ρ)·√(t/t₀)·[(1-e₀)/√e₀³]·[√e³/(1-e)]</div>
            <div class="form-grid">
                <div class="input-group full-row"><label>S₀ (표준 비표면적)</label><input type="number" id="s0" step="any" inputmode="text"></div>
                <div class="input-group"><label>ρ₀ (표준 비중)</label><input type="number" id="rho0" value="3.15" step="any" inputmode="text"></div>
                <div class="input-group"><label>ρ (시험 비중)</label><input type="number" id="rho" step="any" inputmode="text"></div>
                <div class="input-group"><label>t₀ (표준 시간)</label><input type="number" id="t0" step="any" inputmode="text"></div>
                <div class="input-group"><label>t (시험 시간)</label><input type="number" id="t" step="any" inputmode="text"></div>
                <div class="input-group"><label>e₀ (표준 공극률)</label><input type="number" id="e0" value="0.500" step="any" inputmode="text"></div>
                <div class="input-group"><label>e (시험 공극률)</label><input type="number" id="e" value="0.500" step="any" inputmode="text"></div>
            </div>
            <button class="calc-btn" onclick="calcBlaine()">계산하기</button>
            <div id="res1" class="result-card"><span class="result-value" id="val1">0</span> <small>cm²/g</small></div>
        </div>

        <div id="tab2" class="tab-content">
            <h2>공기량(A) 계산</h2>
            <div class="formula-box">A = 100 × [1 - (w/400) × 분수식]</div>
            <div class="form-grid">
                <div class="input-group full-row"><label>단위 수량 (w)</label><input type="number" id="a_w" step="any" inputmode="text"></div>
                <div class="input-group"><label>시멘트 밀도 (C)</label><input type="number" id="a_c" step="any" inputmode="text"></div>
                <div class="input-group"><label>골재 밀도 (S)</label><input type="number" id="a_s" step="any" inputmode="text"></div>
                <div class="input-group full-row"><label>혼화제 혼입률 (P) [%]</label><input type="number" id="a_p" step="any" inputmode="text"></div>
            </div>
            <button class="calc-btn" onclick="calcAir()">계산하기</button>
            <div id="res2" class="result-card"><span class="result-value" id="val2">0</span> <small>%</small></div>
        </div>

        <div id="tab3" class="tab-content">
            <h2>무수 황산 최적값(G)</h2>
            <div class="formula-box">G = [a/(a-b)]c + d + c/2</div>
            <div class="form-grid">
                <div class="input-group"><label>a (조합2-1 강도차)</label><input type="number" id="g_a" step="any" inputmode="text"></div>
                <div class="input-group"><label>b (조합3-2 강도차)</label><input type="number" id="g_b" step="any" inputmode="text"></div>
                <div class="input-group"><label>c (SO₃/100)</label><input type="number" id="g_c" step="any" inputmode="text"></div>
                <div class="input-group"><label>d (시멘트 무수황산)</label><input type="number" id="g_d" step="any" inputmode="text"></div>
            </div>
            <button class="calc-btn" onclick="calcSulfate()">계산하기</button>
            <div id="res3" class="result-card"><span class="result-value" id="val3">0</span> <small>%</small></div>
        </div>
    </div>
</div>

<script>
    function openTab(evt, tabId) {
        const contents = document.getElementsByClassName("tab-content");
        for (let c of contents) c.classList.remove("active");
        const buttons = document.getElementsByClassName("tab-button");
        for (let b of buttons) b.classList.remove("active");
        document.getElementById(tabId).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    function calcAir() {
        const w = parseFloat(document.getElementById('a_w').value);
        const c = parseFloat(document.getElementById('a_c').value);
        const s = parseFloat(document.getElementById('a_s').value);
        const p = parseFloat(document.getElementById('a_p').value);
        if([w,c,s,p].some(isNaN)) return alert("입력값을 확인하세요.");
        const numerator = (337.5 / c) + (1350 / s) + (337.5 * p * 0.01);
        const denominator = 337.5 + 1350 + (337.5 * p * 0.01);
        const res = 100 * (1 - (w / 400) * (numerator / denominator));
        showRes('val2', 'res2', res.toFixed(2));
    }

    function calcBlaine() {
        const getV = (id) => parseFloat(document.getElementById(id).value);
        const s0 = getV('s0'), rho0 = getV('rho0'), rho = getV('rho'), t0 = getV('t0'), t = getV('t'), e0 = getV('e0'), e = getV('e');
        if([s0, rho, t0, t].some(isNaN)) return alert("입력값을 확인하세요.");
        const res = s0 * (rho0/rho) * Math.sqrt(t/t0) * ((1-e0)/Math.sqrt(Math.pow(e0,3))) * (Math.sqrt(Math.pow(e,3))/(1-e));
        showRes('val1', 'res1', res.toFixed(1));
    }

    function calcSulfate() {
        const a = parseFloat(document.getElementById('g_a').value);
        const b = parseFloat(document.getElementById('g_b').value);
        const c = parseFloat(document.getElementById('g_c').value);
        const d = parseFloat(document.getElementById('g_d').value);
        if([a,b,c,d].some(isNaN)) return alert("입력값을 확인하세요.");
        if(a === b) return alert("분모(a-b)가 0이 될 수 없습니다.");
        const res = (a / (a - b)) * c + d + (c / 2);
        showRes('val3', 'res3', res.toFixed(3));
    }

    function showRes(vId, rId, val) {
        document.getElementById(vId).innerText = val;
        document.getElementById(rId).style.display = 'block';
    }
</script>

</body>
</html>