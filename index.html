<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>시험실 모바일 계산기</title>
    <style>
        :root {
            --primary-color: #3498db;
            --bg-color: #f1f3f5;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --border-color: #ced4da;
            --danger-color: #e74c3c;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: var(--bg-color); 
            margin: 0; padding: 15px; color: var(--text-main);
            display: flex; justify-content: center;
        }

        .container { 
            background: var(--card-bg); 
            width: 100%; max-width: 1980px; /* PC 가독성을 위해 소폭 확장 */
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            overflow: hidden; padding-bottom: 25px;
        }

        /* 탭 디자인 개선 */
        .tabs { display: flex; background: #e9ecef; padding: 6px; gap: 6px; }
        .tab-button { 
            flex: 1; padding: 14px 5px; border: none; background: none; 
            font-size: 15px; font-weight: bold; color: #6c757d; cursor: pointer;
            transition: 0.3s; border-radius: 12px;
        }
        .tab-button.active { background: white; color: var(--primary-color); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

        .content-body { padding: 25px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-size: 1.4rem; margin-bottom: 18px; text-align: center; color: var(--text-main); }

        .formula-box { 
            background: #f8f9fa; padding: 14px; border-radius: 10px; 
            font-size: 0.9rem; margin-bottom: 25px; text-align: center; 
            border: 1px solid #e9ecef; color: #495057; font-weight: 500;
        }

        /* 레이아웃 핵심 수정: 그리드 시스템 */
        .form-grid { 
            display: grid; 
            grid-template-columns: 1fr; /* 모바일은 기본 1줄 */
            gap: 15px; 
        }

        .input-group { display: flex; flex-direction: column; }
        label { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #495057; }
        
        /* 입력창과 버튼 묶음 디자인 */
        .input-with-btn { 
            display: flex; 
            align-items: center; 
            gap: 8px; /* 입력창과 버튼 사이 간격 */
        }

        input { 
            flex: 1; /* 가용 공간 모두 차지 */
            min-width: 0; /* 중요: 플렉스 박스 안에서 넘침 방지 */
            height: 52px; padding: 0 15px; border: 2px solid var(--border-color); 
            border-radius: 10px; font-size: 16px; transition: all 0.2s;
            -webkit-appearance: none; /* iOS 스타일 초기화 */
        }
        input:focus { border-color: var(--primary-color); outline: none; background: #fff; }

        .toggle-sign-btn {
            flex: 0 0 52px; /* 버튼 크기를 정확히 고정 (52px 너비 유지) */
            height: 52px; background: #f1f3f5; border: 2px solid var(--border-color);
            border-radius: 10px; font-weight: 800; font-size: 18px;
            cursor: pointer; color: #495057; transition: 0.2s;
        }
        .toggle-sign-btn.is-minus {
            background: var(--danger-color); color: #fff; border-color: var(--danger-color);
        }

        .calc-btn { 
            width: 100%; height: 60px; background: var(--primary-color); color: white; border: none; 
            border-radius: 14px; font-size: 18px; font-weight: bold; margin-top: 30px; 
            cursor: pointer; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        .calc-btn:active { transform: scale(0.98); }

        .result-card { 
            margin-top: 30px; padding: 25px; border-radius: 15px; 
            background: #fdf2f2; border: 2px solid #fee2e2; display: none; text-align: center;
        }
        .result-value { font-size: 36px; font-weight: 800; color: var(--danger-color); }

        /* PC/태블릿 레이아웃 수정 (480px 이상) */
        @media (min-width: 480px) {
            .form-grid { 
                grid-template-columns: 1fr 1fr; /* 2단 구성 */
                column-gap: 20px;
            }
            .full-row { grid-column: span 2; }
            .container { padding: 10px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'tab1')">비표면적</button>
        <button class="tab-button" onclick="openTab(event, 'tab2')">공기량</button>
        <button class="tab-button" onclick="openTab(event, 'tab3')">무수황산</button>
    </div>

    <div class="content-body">
        <div id="tab1" class="tab-content active">
            <h2>비표면적(S) 계산</h2>
            <div class="formula-box">S = S₀·(ρ₀/ρ)·√(t/t₀)·[(1-e₀)/√e₀³]·[√e³/(1-e)]</div>
            <div class="form-grid">
                <div class="input-group full-row">
                    <label>S₀ (표준 비표면적)</label>
                    <div class="input-with-btn">
                        <input type="number" id="s0" step="any" placeholder="값 입력">
                        <button class="toggle-sign-btn" onclick="toggleSign('s0', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>ρ₀ (표준 비중)</label>
                    <div class="input-with-btn">
                        <input type="number" id="rho0" value="3.15" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('rho0', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>ρ (시험 비중)</label>
                    <div class="input-with-btn">
                        <input type="number" id="rho" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('rho', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>t₀ (표준 시간)</label>
                    <div class="input-with-btn">
                        <input type="number" id="t0" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('t0', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>t (시험 시간)</label>
                    <div class="input-with-btn">
                        <input type="number" id="t" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('t', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>e₀ (표준 공극률)</label>
                    <div class="input-with-btn">
                        <input type="number" id="e0" value="0.500" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('e0', this)">±</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>e (시험 공극률)</label>
                    <div class="input-with-btn">
                        <input type="number" id="e" value="0.500" step="any">
                        <button class="toggle-sign-btn" onclick="toggleSign('e', this)">±</button>
                    </div>
                </div>
            </div>
            <button class="calc-btn" onclick="calcBlaine()">결과 계산하기</button>
            <div id="res1" class="result-card"><span class="result-value" id="val1">0</span> <small>cm²/g</small></div>
        </div>

        </div>
</div>

<script>
    function toggleSign(inputId, btn) {
        const input = document.getElementById(inputId);
        let val = parseFloat(input.value);

        if (!isNaN(val)) {
            input.value = (val * -1).toString();
            if (parseFloat(input.value) < 0) {
                btn.classList.add('is-minus');
                btn.innerText = "-";
            } else {
                btn.classList.remove('is-minus');
                btn.innerText = "±";
            }
        }
    }

    function openTab(evt, tabId) {
        const contents = document.getElementsByClassName("tab-content");
        for (let c of contents) c.classList.remove("active");
        const buttons = document.getElementsByClassName("tab-button");
        for (let b of buttons) b.classList.remove("active");
        document.getElementById(tabId).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    function calcBlaine() {
        const getV = (id) => parseFloat(document.getElementById(id).value);
        const s0 = getV('s0'), rho0 = getV('rho0'), rho = getV('rho'), t0 = getV('t0'), t = getV('t'), e0 = getV('e0'), e = getV('e');
        if([s0, rho, t0, t].some(isNaN)) return alert("입력값을 확인하세요.");
        
        // 블레인 공식 계산
        try {
            const res = s0 * (rho0/rho) * Math.sqrt(t/t0) * ((1-e0)/Math.sqrt(Math.pow(e0,3))) * (Math.sqrt(Math.pow(e,3))/(1-e));
            showRes('val1', 'res1', res.toFixed(1));
        } catch(e) {
            alert("계산 중 오류가 발생했습니다.");
        }
    }

    function showRes(vId, rId, val) {
        document.getElementById(vId).innerText = val;
        document.getElementById(rId).style.display = 'block';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>

</body>
</html>

